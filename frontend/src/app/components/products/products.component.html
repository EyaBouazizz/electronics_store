<!-- Hero Start -->
<div class="container-fluid py-5 mb-5 hero-header">
           
    <div class="container py-5">
        <div class="row g-5 align-items-center">
            <div class="col-md-12 col-lg-7">
                <h4 class="mb-3 text-beige" style="font-size:30px;">Find your favorite gadgets</h4>
                <h1 class="mb-5 text-red" style="font-size:60px;">Explore our selection of electronics</h1>                        
            </div>
            <div class="col-md-12 col-lg-5">
                <div id="carouselId" class="carousel slide position-relative cc" data-bs-ride="carousel">
                    <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active rounded">
                            <img src="assets/img/pc.jpg" class="img-fluid bg-secondary rounded"  alt="First slide">
                            <a href="#" class="btn px-4 py-2 text-white rounded">Laptops</a>
                        </div>
                        <div class="carousel-item rounded">
                            <img src="assets/img/phone2.jpg" class="img-fluid bg-secondary rounded" alt="Second slide">
                            <a href="#" class="btn px-4 py-2 text-white rounded">Phones</a>
                        </div>
                        <div class="carousel-item rounded">
                            <img src="assets/img/airpods2.jpeg" class="img-fluid bg-secondary rounded" alt="Second slide">
                            <a href="#" class="btn px-4 py-2 text-white rounded">AirPods</a>
                        </div>
                        <div class="carousel-item rounded">
                            <img src="assets/img/clavier.webp" class="img-fluid bg-secondary rounded" alt="Second slide">
                            <a href="#" class="btn px-4 py-2 text-white rounded">GamerPack</a>
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselId" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselId" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Hero End -->  
<!-- Featurs Section Start -->
<div class="container-fluid featurs py-5">
  <div class="container py-5">
      <div class="row g-4">
          <div class="col-md-6 col-lg-3">
              <div class="featurs-item text-center rounded bg-light p-4">
                  <div class="featurs-icon btn-square rounded-circle bg-beige mb-5 mx-auto">
                      <i class="fas fa-car-side fa-3x text-white"></i>
                  </div>
                  <div class="featurs-content text-center">
                      <h5>Free Shipping</h5>
                      <p class="mb-0">Free on order over 300 DT</p>
                  </div>
              </div>
          </div>
          <div class="col-md-6 col-lg-3">
              <div class="featurs-item text-center rounded bg-light p-4">
                  <div class="featurs-icon btn-square rounded-circle bg-beige mb-5 mx-auto">
                      <i class="fas fa-user-shield fa-3x text-white"></i>
                  </div>
                  <div class="featurs-content text-center">
                      <h5>Security Payment</h5>
                      <p class="mb-0">100% security payment</p>
                  </div>
              </div>
          </div>
          <div class="col-md-6 col-lg-3">
              <div class="featurs-item text-center rounded bg-light p-4">
                  <div class="featurs-icon btn-square rounded-circle bg-beige mb-5 mx-auto">
                      <i class="fas fa-exchange-alt fa-3x text-white"></i>
                  </div>
                  <div class="featurs-content text-center">
                      <h5>30 Day Return</h5>
                      <p class="mb-0">30 day money guarantee</p>
                  </div>
              </div>
          </div>
          <div class="col-md-6 col-lg-3">
              <div class="featurs-item text-center rounded bg-light p-4">
                  <div class="featurs-icon btn-square rounded-circle bg-beige mb-5 mx-auto">
                      <i class="fa fa-phone-alt fa-3x text-white"></i>
                  </div>
                  <div class="featurs-content text-center">
                      <h5>24/7 Support</h5>
                      <p class="mb-0">Support every time fast</p>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>
<!-- Featurs Section End -->
<!-- Electronics Shop Start-->
<div class="container-fluid fruite py-5">
    <div class="container py-5">
        <div class="tab-class text-center">
            <div class="row g-4">
                <div class="col-lg-3 text-start">
                    <h1 class="text-red">Our Products</h1>	                     
                </div>
                <div class="col-lg-9 text-end">
                    <ul class="nav nav-pills d-inline-flex text-center mb-4">
                        <li class="nav-item" *ngIf="isAdmin()">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-0">
                                <span class="text-black" style="width: 80px;">Add +</span>
                           </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill active" data-bs-toggle="pill" href="#tab-1" (click)="fetchProducts()">
                                <span class="text-black" style="width: 130px;">All Products</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-1" (click)="fetchProductsByCategory('Laptop')">
                                <span class="text-black" style="width: 130px;">Laptop</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-1" (click)="fetchProductsByCategory('Phone')">
                                <span class="text-black" style="width: 130px;">Phone</span>
                            </a>
                        </li>
                        <li class="nav-item"  *ngIf="!isAdmin()">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-1" (click)="fetchProductsByCategory('Keyboard')">
                                <span class="text-black" style="width: 130px;">Keyboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="d-flex m-2 py-2 bg-light rounded-pill" data-bs-toggle="pill" href="#tab-1" (click)="fetchProductsByCategory('Mouse')">
                                <span class="text-black" style="width: 130px;">Mouse</span>
                            </a>
                        </li>
                    </ul>
                </div>                
            </div>           
            <div class="tab-content">
                <div id="tab-0" class="tab-pane fade">
                    <div class="container">
                      <div class="row justify-content-center">
                        <div class="col-lg-8">
                          <div class="edit-box">
                            <h2 class="text-center mb-4">Add Product</h2>
                            <form [formGroup]="productForm" (ngSubmit)="addProduct()">
                              <div class="mb-3 row">
                                <label for="productName" class="col-lg-3 col-form-label text-center">Product Name</label>
                                <div class="col-lg-9">
                                  <input type="text" class="form-control" id="productName" formControlName="productName">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="category" class="col-lg-3 col-form-label text-center">Category</label>
                                <div class="col-lg-9">
                                  <input type="text" class="form-control" id="category" formControlName="category">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="brand" class="col-lg-3 col-form-label text-center">Brand</label>
                                <div class="col-lg-9">
                                  <input type="text" class="form-control" id="brand" formControlName="brand">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="popularity" class="col-lg-3 col-form-label text-center">Popularity</label>
                                <div class="col-lg-9">
                                  <input type="number" class="form-control" id="popularity" formControlName="popularity">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="numberOfSales" class="col-lg-3 col-form-label text-center">Number of Sales</label>
                                <div class="col-lg-9">
                                  <input type="number" class="form-control" id="numberOfSales" formControlName="numberOfSales">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="image" class="col-lg-3 col-form-label text-center">Image</label>
                                <div class="col-lg-9">
                                  <input type="text" class="form-control" id="image" formControlName="image">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="availableColors" class="col-lg-3 col-form-label text-center">Available Colors</label>
                                <div class="col-lg-9">
                                  <input type="text" class="form-control" id="availableColors" formControlName="availableColors">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="description" class="col-lg-3 col-form-label text-center">Description</label>
                                <div class="col-lg-9">
                                  <input type="text" class="form-control" id="description" formControlName="description">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="date" class="col-lg-3 col-form-label text-center">Date</label>
                                <div class="col-lg-9">
                                  <input type="text" class="form-control" id="date" formControlName="date">
                                </div>
                              </div>
                              <div class="mb-3 row">
                                <label for="price" class="col-lg-3 col-form-label text-center">Price</label>
                                <div class="col-lg-9">
                                  <input type="number" class="form-control" id="price" formControlName="price">
                                </div>
                              </div>
                              <div class="text-center mt-4">
                                <button type="submit" class="btn border border-sec rounded-pill px-3 text-primary"  [disabled]="productForm.invalid">
                                  {{ isEditing ? 'Save Changes' : 'Add Product' }}
                                </button>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                                         
                    <div id="tab-1" class="tab-pane fade show p-0 active">
                      <div class="row g-4">
                        <div class="col-lg-12">
                          <div class="row g-4">
                            <div *ngFor="let product of paginatedProducts" class="col-md-6 col-lg-4 col-xl-3">
                              <div class="rounded position-relative fruite-item">
                                <div class="fruite-img">
                                  <img
                                  [src]="getProductImage(product.image)"
                                    class="img-fluid w-100 rounded-top"
                                    style="width: 200px; height: 200px; object-fit: cover;"
                                    alt="{{product.productName}}"
                                  />
                                </div>
                                <div class="text-black bg-light px-3 py-1 rounded position-absolute" style="top: 10px; left: 10px;">
                                  {{ product.category }}
                                </div>
                                <div class="position-absolute" style="top: 10px; right: 10px; cursor: pointer;" (click)="toggleWishlist(product.id)">
                                  <fa-icon
                                    [icon]="isInWishlist(product.id) ? faHeartSolid : faHeartRegular"
                                    class="text-danger fs-4"
                                  ></fa-icon>
                                </div>
                                <div class="p-4 border border-secondary border-top-0 rounded-bottom">
                                  <h4
                                    class="text-red"
                                    style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"
                                  >
                                    {{ product.productName }}
                                  </h4>
                                  <p
                                    class="text-gray"
                                    style="display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden;"
                                  >
                                    {{ product.description }}
                                  </p>
                                  <p class="text-gray fs-5 fw-bold mb-0">{{ product.price }} DT</p>
                                    <div class="d-flex justify-content-between flex-lg-wrap">
                                      <a
                                        *ngIf="isAdmin()"
                                        class="btn border border-sec rounded-pill px-3 text-primary"
                                        data-bs-toggle="modal"
                                        data-bs-target="#editProductModal"
                                        (click)="loadProductForEdit(product)"
                                      >
                                        <i class="fa fa-edit me-2 text-primary"></i>Edit
                                      </a>
                  
                                      <a
                                        *ngIf="isAdmin()"
                                        (click)="deleteProduct(product.id)"
                                        class="btn border border-sec rounded-pill px-3 text-primary"
                                      >
                                        <i class="fa fa-trash me-2 text-primary"></i>Delete
                                      </a>
                                      <div *ngIf="!isAdmin()" class="d-inline-flex align-items-center">
                                        <button
                                          (click)="addToCart(product.id, 1)"
                                          class="btn btn-md boarder border-sec rounded-pill px-3 text-primary me-2"
                                        >
                                          <i class="fa fa-shopping-bag me-2 text-primary"></i>Cart
                                        </button>
                                        <a href="javascript:void(0)" 
                                        class="btn btn-md boarder border-sec rounded-pill px-3 text-primary"
                                        data-bs-toggle="modal" 
                                        data-bs-target="#productDetailsModal"
                                        (click)="loadProductDetails(product)">
                                        <i class="fa fa-eye me-2 text-primary"></i>More
                                      </a>
                                      </div>
                                    </div>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="pagination d-flex justify-content-center mt-5">
                            <a
                              href="#"
                              class="rounded"
                              (click)="changePage(currentPage - 1)"
                              [class.disabled]="currentPage === 1"
                              >&laquo;</a
                            >
                            <a
                              *ngFor="let page of [].constructor(totalPages); let i = index"
                              href="#"
                              [class.active]="currentPage === i + 1"
                              class="rounded"
                              (click)="changePage(i + 1)"
                              >{{ i + 1 }}</a
                            >
                            <a
                              href="#"
                              class="rounded"
                              (click)="changePage(currentPage + 1)"
                              [class.disabled]="currentPage === totalPages"
                              >&raquo;</a
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                               		  
            </div>
        </div>      
    </div>
</div>
<!-- Electronics Shop End-->
<!-- Edit Product Modal -->
<div class="modal fade" id="editProductModal" tabindex="-1" aria-labelledby="editProductModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-fullscreen">
    <div class="modal-content rounded-0">
      <div class="modal-header">
        <h5 class="modal-title" id="editProductModalLabel">Edit Product</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
          (click)="cleareditForm()"
        ></button>
      </div>
      <div class="modal-body">
        <div class="container">
          <div class="edit-container">
            <h2>Edit Product</h2>
            <form [formGroup]="editproductForm" >
              <!-- Product Name -->
              <div class="form-group mb-3">
                <label for="editProductName">Product Name</label>
                <input
                  id="editProductName"
                  type="text"
                  formControlName="productName"
                  class="form-control"
                  required
                />
              </div>

              <!-- Category -->
              <div class="form-group mb-3">
                <label for="editCategory">Category</label>
                <input id="editCategory" type="text" formControlName="category" class="form-control" required />
              </div>

              <!-- Brand -->
              <div class="form-group mb-3">
                <label for="editBrand">Brand</label>
                <input id="editBrand" type="text" formControlName="brand" class="form-control" required />
              </div>

              <!-- Popularity -->
              <div class="form-group mb-3">
                <label for="editPopularity">Popularity</label>
                <input id="editPopularity" type="number" formControlName="popularity"  class="form-control" required />
              </div>

              <!-- Number of Sales -->
              <div class="form-group mb-3">
                <label for="editNumberOfSales">Number of Sales</label>
                <input id="editNumberOfSales" type="number" formControlName="numberOfSales" class="form-control" required />
              </div>
              
              <!-- Image -->
              <div class="form-group mb-3">
                  <label for="editImage">Image</label>
                  <input id="editImage" type="text" formControlName="image" class="form-control" required />
              </div>
              
              <!-- Available Colors -->
              <div class="form-group mb-3">
                  <label for="editAvailableColors">Available Colors</label>
                  <input id="editAvailableColors" type="text" formControlName="availableColors" class="form-control" required />
              </div>
              
              <!-- Description -->
              <div class="form-group mb-3">
                  <label for="editDescription">Description</label>
                  <textarea id="editDescription" formControlName="description" class="form-control" rows="3" required></textarea>
              </div>
              
              <!-- Date -->
              <div class="form-group mb-3">
                  <label for="editDate">Date</label>
                  <input id="editDate" type="text" formControlName="date" class="form-control" required />
              </div>

              <!-- Price -->
              <div class="form-group mb-3">
                <label for="editPrice">Price</label>
                <input id="editPrice" type="number" formControlName="price" class="form-control" required />
              </div>

              <!-- Submit Button -->
              <div class="form-group text-center mt-4">
                <button type="submit"  (click)="editProduct()" class="btn btn-primary" [disabled]="editproductForm.invalid">
                  Save Changes
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Product Details Modal -->
<div class="modal fade" id="productDetailsModal" tabindex="-1" aria-labelledby="productDetailsModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title" id="productDetailsModalLabel">{{selectedProduct?.productName}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <!-- Modal Body -->
      <div class="modal-body">
        <!-- Image Carousel -->
        <div id="productCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
          <div class="carousel-inner">
            <!-- Main Image -->
            <div class="carousel-item active">
              <img [src]="'assets/img/' + selectedProduct?.image" 
                   class="d-block w-100 rounded" 
                   alt="{{selectedProduct?.productName}}">
            </div>
            <!-- Additional Images -->
            <div *ngFor="let image of additionalImages" class="carousel-item">
              <img [src]="'assets/img/' + image.name" 
                   class="d-block w-100 rounded" 
                   alt="{{selectedProduct?.productName}}">
            </div>
          </div>
          <!-- Carousel Controls -->
          <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>

        <!-- Product Details -->
        <div class="row">
          <div class="col-md-6">
            <p><strong>Category:</strong> {{selectedProduct?.category}}</p>
            <p><strong>Brand:</strong> {{selectedProduct?.brand}}</p>
            <p><strong>Price:</strong> {{selectedProduct?.price}} DT</p>
            <p><strong>Popularity:</strong> {{selectedProduct?.popularity}}</p>
            <p><strong>Number of Sales:</strong> {{selectedProduct?.numberOfSales}}</p>
          </div>
          <div class="col-md-6">
            <p><strong>Available Colors:</strong></p>
            <div class="d-flex">
              <span *ngFor="let color of selectedProduct?.availableColors?.split(',')" 
                    class="color-dot me-2" [style.backgroundColor]="color.trim()"></span>
            </div>
          </div>
        </div>

        <!-- Full Description -->
        <div class="mt-4">
          <h6>Description</h6>
          <p>{{selectedProduct?.description}}</p>
        </div>
      </div>

      <!-- Modal Footer -->
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>
<!-- Edit Product Modal End -->